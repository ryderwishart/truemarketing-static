/*! Thrive Dashboard - 2019-09-12
* http://www.thrivethemes.com/
* Copyright (c) 2019 Thrive Themes */

!function(a){var b=Backbone.View.extend({el:".tvd-access-manager-setting",events:{"click .tvd-icon-no-cap":"change_capability","click .tvd-icon-cap":"change_capability"},get_icon:function(a){return'<svg class="tvd-icon tvd-icon-'+a+'"><use xlink:href="#icon-'+a+'"></use></svg>'},change_capability:function(b){const c=a(b.target).closest(".tvd-am-cap"),d=c.hasClass("tvd-am-with-cap")?"remove":"add",e=this;if("administrator"===c.attr("data-role")&&"tve-use-td"===c.attr("data-plugin"))return void TVE_Dash.err(TVE_Dash_Const.translations.CapabilityError);TVE_Dash.showLoader(),a.ajax({url:ajaxurl,data:{action:TVE_Dash_Const.actions.backend_ajax,route:TVE_Dash_Const.routes.change_capability,role:c.attr("data-role"),capability:c.attr("data-cap"),capability_action:d},type:"post",dataType:"json"}).done(function(a){a.success?(c.html("add"===d?e.get_icon("cap"):e.get_icon("no-cap")),c.toggleClass("tvd-am-without-cap","add"!==d),c.toggleClass("tvd-am-with-cap","add"===d),TVE_Dash.success(TVE_Dash_Const.translations.CapabilitySuccess,4e3,null,"top")):TVE_Dash.err(a.message,4e3,null,"top")}).always(function(){TVE_Dash.hideLoader()})}});new b}(jQuery);